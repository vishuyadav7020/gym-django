{% extends "base.html" %} {% block title %}Add Member{% endblock %}
{% block content %}

<!-- Navbar -->
<nav
  class="w-full bg-gray-800 border-b border-gray-700 px-6 py-4 flex items-center justify-between"
>
  <div class="flex gap-2 flex-row">
    <button
      onclick="window.history.back()"
      class="px-6 py-2 bg-white text-black font-semibold flex items-center justify-center border-2 border-green-500 hover:border-blue-700 rounded-lg transition"
    >
      ‚Üê Back
    </button>

    <button
      onclick="window.location.href='{% url 'orghome' %}'"
      class="px-6 py-2 bg-white text-black font-semibold flex items-center justify-center border-2 border-green-500 hover:border-blue-700 rounded-lg transition"
    >
      Home
    </button>
  </div>

  <!-- Profile Dropdown -->
  <div class="relative">
    <button
      id="profileBtn"
      class="w-12 h-12 rounded-full overflow-hidden flex items-center justify-center border-2 border-green-500 hover:border-green-400 transition-all duration-300 hover:scale-110 shadow-lg bg-green-500"
    >
      {% if request.session.org_photo %}
      <img
        src="{{ request.session.org_photo }}"
        alt="Profile"
        class="w-full h-full object-cover"
      />
      {% else %}
      <img
        src="https://ui-avatars.com/api/?name={{ request.session.orgname }}&background=22c55e&color=fff&bold=true&size=128"
        alt="Profile"
        class="w-full h-full object-cover"
      />
      {% endif %}
    </button>

    <!-- Dropdown Menu -->
    <div
      id="profileMenu"
      class="hidden absolute right-0 mt-3 w-48 bg-gray-900 border border-gray-700 rounded-xl shadow-lg overflow-hidden z-50"
    >
      <a href="{% url 'org_profile' %}" class="block px-4 py-3 text-sm text-white hover:bg-gray-700">
        üë§ Profile
      </a>

      <a href="{% url 'org_account_settings' %}" class="block px-4 py-3 text-sm text-white hover:bg-gray-700">
        ‚öôÔ∏è Account Settings
      </a>

      <form method="post" action="{% url 'org_logout' %}">
        {% csrf_token %}
        <button
          type="submit"
          class="w-full text-left px-4 py-3 text-sm text-red-400 hover:bg-gray-700"
        >
          üö™ Logout
        </button>
      </form>
    </div>
  </div>
</nav>

<div class="min-h-screen bg-gray-900 flex items-center justify-center">
  <div
    class="w-full max-w-xl bg-gray-800 p-8 rounded-2xl shadow-lg outline outline-white hover:outline-blue-800"
  >
    <h2 class="text-3xl font-bold text-green-400 mb-6 text-center">
      Add New Member
    </h2>

    <form method="post" class="space-y-5">
      {% csrf_token %}

      <input type="hidden" name="next" value="{{ next }}">

      <div class="grid grid-cols-2 gap-4">
        <input
          name="first_name"
          placeholder="First Name"
          style="color: white"
          required
          class="input outline hover:outline-blue-800"
        />
        <input
          name="last_name"
          placeholder="Last Name"
          required
          class="input outline hover:outline-blue-800"
        />
      </div>

      <input
        name="email"
        type="email"
        placeholder="Email"
        required
        class="input outline hover:outline-blue-800"
      />

      <input
        name="phone"
        type="tel"
        placeholder="Phone Number"
        maxlength="10"
        required
        class="input outline hover:outline-blue-800"
      />

      <select name="gender" required class="input outline hover:outline-blue-800">
        <option value="">Gender</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>

      <select name="membership_type" required class="input outline hover:outline-blue-800">
        <option value="">Membership Type</option>
        <option value="monthly">Monthly</option>
        <option value="quarterly">Quarterly</option>
        <option value="yearly">Yearly</option>
      </select>

      <select name="trainer_id" class="input outline hover:outline-blue-800">
        <option value="">Assign Trainer (optional)</option>
        {% comment %} {% for trainer in trainers %}
        <option value="{{ trainer._id }}">{{ trainer.name }}</option>
        {% endfor %} {% endcomment %}
      </select>

      <button
        type="submit"
        class="w-full py-3 bg-green-500 hover:bg-green-700 rounded-lg font-semibold transition"
      >
        Save Member
      </button>
    </form>
  </div>
</div>

<style>
  .input {
    width: 100%;
    padding: 12px;
    background: #111827;
    border: 1px solid #374151;
    border-radius: 0.75rem;
    color: white;
  }

  .input::placeholder {
    color: white;
    opacity: 1;
  }

  /* Select text color */
  select.input {
    color: white;
  }

  select option {
    background: #111827;
    color: white;
  }
</style>

<script>
  const profileBtn = document.getElementById("profileBtn");
  const profileMenu = document.getElementById("profileMenu");

  profileBtn.addEventListener("click", () => {
    profileMenu.classList.toggle("hidden");
  });

  document.addEventListener("click", (e) => {
    if (!profileBtn.contains(e.target) && !profileMenu.contains(e.target)) {
      profileMenu.classList.add("hidden");
    }
  });
</script>

{% endblock %}
