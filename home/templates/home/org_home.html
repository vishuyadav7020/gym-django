{% extends "base.html" %} {% block title %}Organisation Dashboard{% endblock %}
{% block content %}
<div class="min-h-screen bg-gray-900 text-white">
  <nav
    class="bg-gray-800 border-b border-gray-700 px-6 py-4 flex justify-between items-center"
  >
    <!-- Left: Org Info -->
    <div>
      <h1 class="text-2xl font-bold text-green-400">
        {{ request.session.orgname|upper }}
      </h1>
      <p class="text-sm text-gray-400">Organisation Panel</p>
    </div>

    <!-- Right: Profile Dropdown -->
    <div class="relative rounded-full bg-white">
      <!-- Profile Button -->
      <button
        id="profileBtn"
        class="px-6 rounded-full overflow-hidden flex items-center justify-center border-2 border-green-500 hover:border-blue-700 "
      >
        {% if request.session.org_photo %}
        <!-- Uploaded org photo -->
        <img
          src="{{ request.session.org_photo }}"
          alt="Profile"
          class="w-5 h-12 px-0 object-contain"
        />
        {% else %}
        <!-- Auto-generated initials -->
        <img
          src="https://ui-avatars.com/api/?name={{ request.session.orgname }}&background=22c55e&color=fff&bold=true"
          alt="Profile"
          class="w-full h-full object-cover"
        />
        {% endif %}
      </button>

      <!-- Dropdown -->
      <div
        id="profileMenu"
        class="hidden absolute right-0 mt-3 w-48 bg-gray-900 border border-gray-700 rounded-xl shadow-lg overflow-hidden z-50"
      >
        <a
          href="#"
          class="block px-4 py-3 text-sm text-white hover:bg-gray-700"
        >
          ğŸ‘¤ Profile
        </a>

        <a
          href="#"
          class="block px-4 py-3 text-sm text-white hover:bg-gray-700"
        >
          âš™ï¸ Account Settings
        </a>

        <form method="post" action="{% url 'org_logout' %}">
          {% csrf_token %}
          <button
            type="submit"
            class="w-full text-left px-4 py-3 text-sm text-red-400 hover:bg-gray-700"
          >
            ğŸšª Logout
          </button>
        </form>
      </div>
    </div>
  </nav>

  <!-- Dashboard Content -->
  <main class="p-10 max-w-7xl mx-auto">
    <!-- Welcome -->
    <div class="mb-10">
      <h2 class="text-3xl font-bold text-white">Welcome Back ğŸ‘‹</h2>
      <p class="text-gray-400 mt-2">
        Manage your Gym, Members, Trainers and Payments from one place
      </p>
    </div>

    <!-- Feature Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- Members -->
      <a
        href="{% url 'member_home' %}"
        class="bg-gray-800 border border-gray-700 rounded-2xl p-8 hover:border-green-500 hover:scale-[1.02] transition transform shadow-lg"
      >
        <div class="text-5xl mb-4">ğŸ‘¥</div>
        <h3 class="text-2xl font-bold mb-2">Members</h3>
        <p class="text-gray-400 text-sm">
          View, add, update and manage gym members
        </p>
      </a>

      <!-- Trainers -->
      <a
        href="{% url 'trainer_home' %}"
        class="bg-gray-800 border border-gray-700 rounded-2xl p-8 hover:border-blue-500 hover:scale-[1.02] transition transform shadow-lg"
      >
        <div class="text-5xl mb-4">ğŸ§‘â€ğŸ«</div>
        <h3 class="text-2xl font-bold mb-2">Trainers</h3>
        <p class="text-gray-400 text-sm">
          Manage trainers, roles and assignments
        </p>
      </a>

      <!-- Payments -->
      <a
        href="{% url 'payment_home' %}"
        class="bg-gray-800 border border-gray-700 rounded-2xl p-8 hover:border-yellow-500 hover:scale-[1.02] transition transform shadow-lg"
      >
        <div class="text-5xl mb-4">ğŸ’³</div>
        <h3 class="text-2xl font-bold mb-2">Payments</h3>
        <p class="text-gray-400 text-sm">
          Track subscriptions, invoices and revenue
        </p>
      </a>
    </div>
  </main>
</div>

<script>
  const profileBtn = document.getElementById("profileBtn");
  const profileMenu = document.getElementById("profileMenu");

  profileBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    profileMenu.classList.toggle("hidden");
  });

  profileMenu.addEventListener("click", (e) => {
    e.stopPropagation();
  });

  document.addEventListener("click", () => {
    profileMenu.classList.add("hidden");
  });
</script>

{% endblock %}
